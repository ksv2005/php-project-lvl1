#!/usr/bin/env php
<?php

require_once __DIR__ . '/../vendor/autoload.php';
use function cli\line;
use function cli\prompt;

function isEven($number)
{
    if ($number % 2 === 0) {
        return "yes";
    }
    return "no";
}

function main()
{
    $game_description = "Answer 'yes' if the number is even, otherwise answer 'no'.";
    line('Welcome to the Brain Game!');
    $name = prompt('May I have your name?');
    line("Hello, %s!", $name);
    line($game_description);
    evenGame($name);
}

function evenGame($name)
{
    $count = 0;
    while ($count < 3) {
        $random_number = rand(0, 100);
        line("Question: {$random_number}");
        $correct_answer = isEven($random_number);
        $user_answer = prompt("Your answer");
        if ($user_answer !== $correct_answer) {
            line("{$user_answer} is wrong answer ;(. Correct answer was {$correct_answer}.");
            line("Let's try again, {$name}!");
            return;
        }
        line("Correct!");
        $count++;
    }
    line("Congratulations, {$name}!");
}

main();
